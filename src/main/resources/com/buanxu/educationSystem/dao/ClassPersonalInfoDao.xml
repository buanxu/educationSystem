<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.buanxu.educationSystem.dao.ClassPersonalInfoDao">
    <!--<sql id="className">
        <where>
            <if test="className=='电信1601' ">
                 telecom1601_personalinfo
            </if>
            <if test="className=='电信1602' ">
                 telecom1602_personalinfo
            </if>
        </where>
    </sql>
    <insert id="save" parameterType="PersonalInfo">
        insert into <include refid="className"></include>
        (className,studentNumber,name,phone,age,sex,address,birthday)
        values(#{className},#{studentNumber},#{name},#{phone},#{age},#{sex},#{address},#{birthday})
    </insert>-->

    <sql id="className">
        <choose>
            <when test="className=='电信1601'">telecom1601_personalinfo</when>
            <when test="className=='电信1602'">telecom1602_personalinfo</when>
            <when test="className=='电气1601'">electrical1601_personalinfo</when>
            <when test="className=='电气1602'">electrical1602_personalinfo</when>
            <when test="className=='自动化1601'">automation1601_personalinfo</when>
            <when test="className=='自动化1602'">automation1602_personalinfo</when>

        </choose>
    </sql>

    <select id="findCountByMap" resultType="int" parameterType="Map">
        select count(name) from ${classTable}
    </select>

    <select id="finListByMap" parameterType="Map" resultType="PersonalInfo">
        select * from ${classTable}
        limit #{startIndex},#{pageSize}
    </select>

    <insert id="save" parameterType="PersonalInfo">
        insert into <include refid="className"></include>
        (className,studentNumber,name,phone,age,sex,address,birthday)
        values(#{className},#{studentNumber},#{name},#{phone},#{age},#{sex},#{address},#{birthday})
    </insert>

    <select id="findByStudentNumber" resultType="PersonalInfo">
        select * from <include refid="className"></include>
    </select>

</mapper>